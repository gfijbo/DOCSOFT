{# src/doc/PlateformBundle/views/DossierAgent/seeChamp.html.twig #}
{% extends "CoreBundle::abst.html.twig" %}

{% block title %}
{{ parent() }}
{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% endblock %}

{% block body %}
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-8 col-lg-12">
				<a class="btn btn-success"
					href="{{ asset('/pdfchamp/') }}{{ doss.getId() }}" target=_blank>Imprimer</a>
					<br><br>
				<h1>
					{{ doss.getChamp() }}
				</h1>
				<div id={{doss.getId() }}>
					<!-- <br>
					**************************************************************************************************************************
					<br>-->
				</div>
				<h3>Champ:</h3>
				<p>
					{{ doss.getChamp() }}
				</p>

				{% if doss.getOrigine() %}
				<h3>Origine:</h3>
				<p>
					{{ doss.getOrigine() }}
				</p>
				{% else %}
				{% endif %}

				{% if doss.getFormat() %}
				<h3>Format:</h3>
				<p>
					{{ doss.getFormat() }}
				</p>
				{% else %}
				{% endif %}

				{% if doss.getLibelle() %}
				<h3>Libell&eacute;:</h3>
				<p>
					{{ doss.getLibelle() }}
				</p>
				{% else %}
				{% endif %}

				{% if doss.getNum_ordre() %}
				<h3>Num&eacute;ro d'ordre:</h3>
				<p>
					{{ doss.getNum_ordre() }}
				</p>
				{% else %}
				{% endif %}


				{% if doss.getTyp_don() %}
				<h3>Type de donn&eacute;es:</h3>
				<p>
					{{ doss.getTyp_don() }}
				</p>
				{% else %}
				{% endif %}

				{% if doss.getDescr_typ_don() %}
				<h3>Description du type des donn&eacute;es:</h3>
				<p>
					{{ doss.getDescr_typ_don() }}
				</p>
				{% else %}
				{% endif %}

				<h3>Commentaire Client:</h3>
				{# si l'utilisateur est connect√©, affichage du formulaire pour
				ajouter un commentaire #}
				{% if app.user %}
				<form action="/addcom" method="post">
					<input type="hidden" name="champs" value="{{ doss.getId() }}">
					<textarea name="nom" row="4" cols="60" onclick="this.value ='';" placeholder="Veuillez entrer votre commentaire ici"></textarea>
					<input type="submit" class="button btn-success"
						href="{{ asset('/addcom') }}" value="Ajouter le commentaire"></a>
				</form>
				{% endif %}
				<br>
				{# affichage de tous les commentaires du champ #}
				<ul class="list-group">
				{% for com in doss.getCommentaires() %}
				
				{% if app.user == com.getUser() %}
				<form action="/modcom" method="post">
					<input type="hidden" name="com" value="{{ com.getId() }}">
					<input type="hidden" name="champs" value="{{ doss.getId() }}">
					<li class="list-group-item list-group-item-info">
						<h4>{{ com.getUser() }} : {{ com.getUpdatedAt()|date('H:i:s d-m-y')}}</h4>
					</li>
					<textarea name="nom" row="4" cols="60">{{ com.getCommentaire() }} </textarea>
					<input type="submit" class="button btn-success"
						href="{{ asset('/modcom') }}" value="Modifier le commentaire"></a>
				</form>
				{% else %}
				<li class="list-group-item list-group-item-info">
					<h4>{{ com.getUser() }} : {{ com.getUpdatedAt()|date('H:i:s d-m-y')}}</h4>
				</li>
				<li class="list-group-item">
					<p>{{ com.getCommentaire()}}</p>
				</li>
				{% endif %}
				{% endfor %}
				</ul>
			</div>
		</div>
	</div>

	{% endblock %}
	{% block javascripts %}
	{{ parent() }}
	{% endblock %}